<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>next-query-utils - v1.4.3</title><meta name="description" content="Documentation for next-query-utils"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><link rel="stylesheet" href="assets/custom.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">next-query-utils - v1.4.3</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>next-query-utils - v1.4.3</h2></div><div class="tsd-panel tsd-typography"><a id="md:next-query-utils" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Next Query Utils<a href="#md:next-query-utils" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p><a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a></p>
<blockquote>
<p>[!NOTE]</p>
<p>This lib no longer updates <em>in npm</em>. latest: <a href="https://badge.fury.io/js/next-query-utils"><img src="https://badge.fury.io/js/next-query-utils.svg" alt="npm version"></a></p>
<p>Instead, use <a href="https://jsr.io/@honey32/next-query-utils">JSR where it's published as v2.x or later</a></p>
</blockquote>
<p>This library provides utility functions to deal with <strong>Parsed Query Objects</strong> (especially of Next.js)</p>
<p>このライブラリには、<strong>Parsed Query Object</strong> （特に Next.js のもの）を取り扱うためのユーティリティ関数群が含まれます。</p>
<a id="md:links--リンク集" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Links — リンク集<a href="#md:links--リンク集" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><a href="https://honey32.github.io/next-query-utils/">API Documentions — APIドキュメント</a></li>
</ul>
<a id="md:install" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Install<a href="#md:install" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><pre><code class="sh"><span class="hl-0">//</span><span class="hl-1"> </span><span class="hl-2">with</span><span class="hl-1"> </span><span class="hl-2">npm</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">i</span><span class="hl-1"> </span><span class="hl-2">next-query-utils</span><br/><br/><span class="hl-0">//</span><span class="hl-1"> </span><span class="hl-2">with</span><span class="hl-1"> </span><span class="hl-2">yarn</span><br/><span class="hl-0">yarn</span><span class="hl-1"> </span><span class="hl-2">add</span><span class="hl-1"> </span><span class="hl-2">next-query-utils</span>
</code><button type="button">Copy</button></pre>

<a id="md:usages--使い方" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Usages — 使い方<a href="#md:usages--使い方" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><a id="md:getting-single-value--単独の値を取得する" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Getting single value — 単独の値を取得する<a href="#md:getting-single-value--単独の値を取得する" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p><code>?id=aaa</code> or <code>?id=aaa&amp;id=other</code> -&gt; <code>&quot;aaa&quot;</code></p>
<pre><code class="ts"><br/><span class="hl-3">// before</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">_id</span><span class="hl-1"> = </span><span class="hl-6">router</span><span class="hl-1">.</span><span class="hl-6">query</span><span class="hl-1">[</span><span class="hl-2">&quot;id&quot;</span><span class="hl-1">]</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">id</span><span class="hl-1"> = </span><span class="hl-6">Array</span><span class="hl-1">.</span><span class="hl-0">isArray</span><span class="hl-1">(</span><span class="hl-6">id</span><span class="hl-1">) ? </span><span class="hl-6">id</span><span class="hl-1">[</span><span class="hl-7">0</span><span class="hl-1">] : </span><span class="hl-6">id</span><br/><br/><span class="hl-3">// after</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">id</span><span class="hl-1"> = </span><span class="hl-0">getSingleQueryParam</span><span class="hl-1">(</span><span class="hl-6">router</span><span class="hl-1">.</span><span class="hl-6">query</span><span class="hl-1">, </span><span class="hl-2">&quot;id&quot;</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="md:removing-some-params--値を取り除く" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Removing some params — 値を取り除く<a href="#md:removing-some-params--値を取り除く" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p><code>?start_on=2022-03-02&amp;item_type=stationary&amp;item_type=book</code>
-&gt; <code>?start_on=2022-03-02&amp;item_type=stationary</code></p>
<a id="md:before" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Before<a href="#md:before" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><details><summary>Code (I don't want to write such an annoying code any more.)<br/>二度と書きたくないひどいコード </summary><div>
<pre><code class="ts"><span class="hl-3">// before</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-0">removeQuery</span><span class="hl-1"> = (</span><br/><span class="hl-1">  </span><span class="hl-6">query</span><span class="hl-1">: </span><span class="hl-8">ParsedUrlQuery</span><span class="hl-1">, </span><br/><span class="hl-1">  </span><span class="hl-6">key</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-6">pred</span><span class="hl-1">: </span><span class="hl-8">string</span><br/><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">value</span><span class="hl-1"> = </span><span class="hl-6">query</span><span class="hl-1">[</span><span class="hl-6">key</span><span class="hl-1">]</span><br/><br/><span class="hl-1">  </span><span class="hl-3">// if empty, leave query as it is.</span><br/><span class="hl-1">  </span><span class="hl-9">if</span><span class="hl-1"> (!</span><span class="hl-6">value</span><span class="hl-1">) </span><span class="hl-9">return</span><span class="hl-1"> </span><span class="hl-6">query</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-9">if</span><span class="hl-1"> (</span><span class="hl-6">Array</span><span class="hl-1">.</span><span class="hl-0">isArray</span><span class="hl-1">(</span><span class="hl-6">value</span><span class="hl-1">)) {</span><br/><span class="hl-1">    </span><span class="hl-9">if</span><span class="hl-1">(</span><span class="hl-6">value</span><span class="hl-1">.</span><span class="hl-6">length</span><span class="hl-1"> === </span><span class="hl-7">0</span><span class="hl-1">) </span><span class="hl-9">return</span><span class="hl-1"> </span><span class="hl-6">query</span><span class="hl-1">;</span><br/><br/><span class="hl-1">    </span><span class="hl-3">// if non-empty array of string</span><br/><span class="hl-1">    </span><span class="hl-9">return</span><span class="hl-1"> { ...</span><span class="hl-6">acc</span><span class="hl-1">, </span><span class="hl-6">[key]:</span><span class="hl-1"> </span><span class="hl-6">value</span><span class="hl-1">.</span><span class="hl-0">filter</span><span class="hl-1">(</span><span class="hl-6">s</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-6">s</span><span class="hl-1"> !== </span><span class="hl-6">pred</span><span class="hl-1">) };</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-3">// if single string (not empty)</span><br/><span class="hl-1">  </span><span class="hl-9">return</span><span class="hl-1"> { ...</span><span class="hl-6">acc</span><span class="hl-1">, </span><span class="hl-6">[key]:</span><span class="hl-1"> (</span><span class="hl-6">s</span><span class="hl-1"> !== </span><span class="hl-6">value</span><span class="hl-1">) ? </span><span class="hl-6">value</span><span class="hl-1"> : [] };</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

</div>
</details>
<a id="md:after" class="tsd-anchor"></a><h3 class="tsd-anchor-link">After<a href="#md:after" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-3">// after</span><br/><span class="hl-6">router</span><span class="hl-1">.</span><span class="hl-0">push</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-0">removeQueryParam</span><span class="hl-1">({ </span><br/><span class="hl-1">    </span><span class="hl-6">item_type:</span><span class="hl-1"> </span><span class="hl-2">&quot;book&quot;</span><br/><span class="hl-1">  })(</span><span class="hl-6">router</span><span class="hl-1">.</span><span class="hl-6">query</span><span class="hl-1">)</span><br/><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="md:keeping-some-params-or-nextjss-dynamic-routes-from-being-reset---（nextjss-の動的ルートや）パラメータを残して他を削除する" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Keeping some params (or Next.js's dynamic routes) from being reset <br/> — （Next.js's の動的ルートや）パラメータを残して他を削除する<a href="#md:keeping-some-params-or-nextjss-dynamic-routes-from-being-reset---（nextjss-の動的ルートや）パラメータを残して他を削除する" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p><code>/[postId]?other=value&amp;other2=value</code>
-&gt; <code>/[postId]</code></p>
<hr>
<p>In pages with <a href="https://nextjs.org/docs/routing/dynamic-routes">Next.js's dynamic routes</a>, <code>router.query</code> include them (in this example, <code>.postId</code>). so they <strong>MUST be kept from resetting</strong>.</p>
<p>In this case, use <code>resetQuery()</code> with <code>ignore</code> option.</p>
<hr>
<p><a href="https://nextjs.org/docs/routing/dynamic-routes">Next.js の動的ルート</a>があるページでは、それが <code>router.query</code> に含まれる。（この例では <code>.postId</code>） なので、それらは <strong>削除してはいけない</strong>。</p>
<p>このようなケースでは <code>resetQuery()</code> と <code>ignore</code> オプションを使いましょう。</p>
<hr>
<pre><code class="ts"><span class="hl-3">// before</span><br/><span class="hl-6">router</span><span class="hl-1">.</span><span class="hl-0">push</span><span class="hl-1">({ </span><span class="hl-6">postId:</span><span class="hl-1"> </span><span class="hl-6">router</span><span class="hl-1">.</span><span class="hl-6">query</span><span class="hl-1">[</span><span class="hl-2">&quot;postId&quot;</span><span class="hl-1">] })</span><br/><br/><span class="hl-3">// after</span><br/><span class="hl-6">router</span><span class="hl-1">.</span><span class="hl-0">push</span><span class="hl-1">(</span><span class="hl-0">resetQuery</span><span class="hl-1">({ </span><span class="hl-6">ignore:</span><span class="hl-1"> </span><span class="hl-2">&quot;postId&quot;</span><span class="hl-1"> })(</span><span class="hl-6">router</span><span class="hl-1">.</span><span class="hl-6">query</span><span class="hl-1">))</span>
</code><button type="button">Copy</button></pre>

<a id="md:checking-if-query-is-empty-ignoring-some-params-eg-dynamic-routes-（動的ルートのような）パラメータ幾つかを無視して、クエリが空であるか確かめる" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Checking if query is empty ignoring some params (e.g. dynamic routes)<br/>— （動的ルートのような）パラメータ幾つかを無視して、クエリが空であるか確かめる<a href="#md:checking-if-query-is-empty-ignoring-some-params-eg-dynamic-routes-（動的ルートのような）パラメータ幾つかを無視して、クエリが空であるか確かめる" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><em>True</em> if <code>/items/[postId]</code></li>
<li><em>False</em> if <code>/items/[postId]?param1=aa</code></li>
</ul>
<hr>
<p>Likewise, you need to ignore <em>dynamic routes</em> in order to check if the query is empty.</p>
<p>In this case, use <code>isQueryEmpty()</code> with <code>ignore</code> option.</p>
<hr>
<p>前の例と同じように、クエリが空であるか確かめるためには、
<em>動的ルート</em> を無視する必要があります。</p>
<p>このようなケースでは、<code>isQueryEmpty()</code> と <code>ignore</code> オプションを使いましょう。</p>
<hr>
<pre><code class="ts"><span class="hl-0">isQueryEmpty</span><span class="hl-1">(</span><span class="hl-6">router</span><span class="hl-1">.</span><span class="hl-6">query</span><span class="hl-1">, { </span><span class="hl-6">ignore:</span><span class="hl-1"> </span><span class="hl-2">&quot;postId&quot;</span><span class="hl-1"> })</span>
</code><button type="button">Copy</button></pre>

<a id="md:license" class="tsd-anchor"></a><h1 class="tsd-anchor-link">License<a href="#md:license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>This library is licensed under the terms of <a href="/license">MIT License</a></p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:next-query-utils"><span>Next <wbr/>Query <wbr/>Utils</span></a><ul><li><a href="#md:links--リンク集"><span>Links — リンク集</span></a></li></ul><a href="#md:install"><span>Install</span></a><a href="#md:usages--使い方"><span>Usages — 使い方</span></a><ul><li><a href="#md:getting-single-value--単独の値を取得する"><span>Getting single value — 単独の値を取得する</span></a></li><li><a href="#md:removing-some-params--値を取り除く"><span>Removing some params — 値を取り除く</span></a></li><li><ul><li><a href="#md:before"><span>Before</span></a></li><li><a href="#md:after"><span>After</span></a></li></ul></li><li><a href="#md:keeping-some-params-or-nextjss-dynamic-routes-from-being-reset---（nextjss-の動的ルートや）パラメータを残して他を削除する"><span>Keeping some params (or <wbr/>Next.js&#39;s dynamic routes) from being reset &lt;br/&gt; — （<wbr/>Next.js&#39;s の動的ルートや）パラメータを残して他を削除する</span></a></li><li><a href="#md:checking-if-query-is-empty-ignoring-some-params-eg-dynamic-routes-（動的ルートのような）パラメータ幾つかを無視して、クエリが空であるか確かめる"><span>Checking if query is empty ignoring some params (e.g. dynamic routes)&lt;br/&gt;— （動的ルートのような）パラメータ幾つかを無視して、クエリが空であるか確かめる</span></a></li></ul><a href="#md:license"><span>License</span></a></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>next-query-utils - v1.4.3</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>